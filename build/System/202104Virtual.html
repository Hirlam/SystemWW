<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>202104 Virtual · System WW</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../index.html">System WW</a></span></div><form class="docs-search" action="../search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../index.html">Home</a></li><li><span class="tocitem">System</span><ul><li class="is-active"><a class="tocitem" href="202104Virtual.html">202104 Virtual</a><ul class="internal"><li><a class="tocitem" href="#Participants"><span>Participants</span></a></li><li><a class="tocitem" href="#Agenda,-Meeting-notes-and-tasks-progress"><span>Agenda, Meeting notes and tasks progress</span></a></li><li><a class="tocitem" href="#General-questions"><span>General questions</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">System</a></li><li class="is-active"><a href="202104Virtual.html">202104 Virtual</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="202104Virtual.html">202104 Virtual</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Hirlam/SystemWW/blob/main/src/System/202104Virtual.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Virtual"><a class="docs-heading-anchor" href="#Virtual">202104 Virtual</a><a id="Virtual-1"></a><a class="docs-heading-anchor-permalink" href="#Virtual" title="Permalink"></a></h1><ul><li>Date: 19 - 23 April  2021</li><li><a href="https://meet.google.com/xwx-hhrq-uuy">Google link</a></li><li><a href="https://hirlam.org/trac/wiki/Meetings/System/Video_Meetings/2021">Notes</a> from previous meeting  </li><li>Markdown format <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">Cheatsheet</a>  </li></ul><h2 id="Participants"><a class="docs-heading-anchor" href="#Participants">Participants</a><a id="Participants-1"></a><a class="docs-heading-anchor-permalink" href="#Participants" title="Permalink"></a></h2><table><tr><th style="text-align: right">Name</th><th style="text-align: right">Institute</th><th style="text-align: right">ARR - DEP</th><th style="text-align: right">Home</th></tr><tr><td style="text-align: right">Roel Stappers</td><td style="text-align: right">MET Norway</td><td style="text-align: right">Monday - Friday</td><td style="text-align: right">Grubbenvorst</td></tr><tr><td style="text-align: right">Daniel Santos</td><td style="text-align: right">DMI</td><td style="text-align: right">Monday - Friday</td><td style="text-align: right">Becerril</td></tr><tr><td style="text-align: right">Ulf Andrae</td><td style="text-align: right">SMHI</td><td style="text-align: right">Monday - Friday</td><td style="text-align: right">Norrköping</td></tr><tr><td style="text-align: right">Toon Moene</td><td style="text-align: right">KNMI</td><td style="text-align: right">Monday - Friday</td><td style="text-align: right">Maartensdijk</td></tr><tr><td style="text-align: right">Eoin Whelan</td><td style="text-align: right">METIE</td><td style="text-align: right">Monday - Friday</td><td style="text-align: right">Trim</td></tr><tr><td style="text-align: right">Bert van Ulft</td><td style="text-align: right">KNMI</td><td style="text-align: right">Monday - Friday</td><td style="text-align: right">Utrecht</td></tr><tr><td style="text-align: right">Ole Vignes</td><td style="text-align: right">MET Norway</td><td style="text-align: right">Monday - Friday</td><td style="text-align: right">Oslo</td></tr></table><h2 id="Agenda,-Meeting-notes-and-tasks-progress"><a class="docs-heading-anchor" href="#Agenda,-Meeting-notes-and-tasks-progress">Agenda, Meeting notes and tasks progress</a><a id="Agenda,-Meeting-notes-and-tasks-progress-1"></a><a class="docs-heading-anchor-permalink" href="#Agenda,-Meeting-notes-and-tasks-progress" title="Permalink"></a></h2><p>To discuss: An alternative to adding the progress below would be to create an issue for each task (in this SystemWW repo not the Harmonie repo) and keep track of the progress there in the comments (and close the issue when the task is finished)</p><h3 id="Priorities-2021"><a class="docs-heading-anchor" href="#Priorities-2021">Priorities 2021</a><a id="Priorities-2021-1"></a><a class="docs-heading-anchor-permalink" href="#Priorities-2021" title="Permalink"></a></h3><ol><li>Davaii and mitrailllette for Harmonie if is possible outside MF <strong>PENDING</strong></li><li>Bundling tool - <strong>PENDING</strong></li><li>Common work space (gitlab, docs ...) <strong>ON GOING</strong></li><li>Cross families working weeks- <strong>ON GOING</strong> ???</li><li>Subhourly cycling based in perl or rewrite in python (resources ???)- &#39;&#39;&#39;Implementation in cy46&#39;&#39;&#39; <strong>ON GOING</strong></li></ol><h3 id="CY43"><a class="docs-heading-anchor" href="#CY43">CY43</a><a id="CY43-1"></a><a class="docs-heading-anchor-permalink" href="#CY43" title="Permalink"></a></h3><ul><li>Testing for tagging 43h2.2<ul><li>New simplified procedure these test [slide]- <strong>Jeanette, Bent, Daniel</strong></li><li>MetCoOp has some verification test ICERAD. Create a link in <a href="https://hirlam.org/trac/wiki/Harmonie_43h2/Validation_for_tagging_43h2.2">validation for tagging</a> - <strong>Ole</strong></li></ul></li><li>Review issues and Pending tasks<ul><li>Restrict ECCODES version to 2.18.0 to avoid some GRIB encoding problems although we can not encode spectral components. For this 2.21.0 is required. Ryad writes about GRIB output:</li></ul><blockquote><p>If you wish to produce GRIB2 files and not FA files directly out of Fullpos for backend post-processing, then you must be aware or the keys LEXTERN, CMODEL, NIDCEN and NFPGRIB, and then these mods and library are important. This is what we do in Meteo-France for operations since cycle 43t2.</p></blockquote></li></ul><p>For historical or coupling files it will become important for large resolutions or dimensions that GRIB1 can&#39;t support (but I don&#39;t know the limits). In Météo-France we shall use this GRIB2 encoding in LAM historical and coupling FA files in cycle 46t1 to be ready for the future, though it is not yet necessary for our operational resolutions. - <strong>Ulf</strong>      - ECMWF HPC and MARS retrievals are very slow      - Fix the issue &#39;harmonie AN runs that would use/dev/shm to create ODB related files and directories&#39;<a href="https://github.com/Hirlam/Harmonie/issues/17">issue</a><strong>Closed</strong></p><ul><li>Workflow in GitHub (pull requests, user forks, ...)  <ul><li>Prototype for github action to submit experiments from github - <strong>Roel</strong></li></ul><blockquote><p>Done. <a href="https://github.com/roelstappers/Harmonie/blob/feature/githubactions/.github/workflows/run_at_ecmwf.yml">example</a>. Works technically but needs discussion with ECMWF because of potential security issues. If we want to go for this workflow ask ECMWF to provide a github actions for access to TEMS with HID login? </p></blockquote><ul><li>Prototype for github actions to extract information from log files - <strong>Roel</strong> </li></ul><blockquote><p>Done. <a href="https://github.com/roelstappers/HarmonieExperiments/runs/2407700546?check_suite_focus=true#step:3:9">grepcost example</a>. made by <a href="https://github.com/Hirlam/HarmonieExperiments/blob/main/.github/workflows/grepcost.yml">github action</a></p></blockquote><ul><li>Consider splitting configuration (in YAML/TOML/JSON) setting in a seperate repo and use JSON schema for validation and get <a href="https://hirlam.github.io/Harmonie.jl/">GUIs</a> for free.</li></ul></li><li>harmonie<em>43h2.2.target.1 branch created in dsantosm fork for new settings. Info about the settings [here](https://hirlam.org/trac/wiki/Harmonie</em>43h2/Potential<em>updates</em>for<em>tagging</em>43h2.2)     <ul><li>surfex<em>namelists.pm: CSEA</em>FLUX =&gt; &#39;&quot;ECUME6&quot; </li><li>NLWLIQOPT to 3: Nielsen (SW), Nielsen (LW) - Some fix is still needed <strong>Kristian</strong> will send a pullrequest</li><li>setting the CCN to 50 per cm3 src/arpifs/phys_dmn/suparar.F90:RFRMIN(26)=50E6</li><li>LICERAD=TRUE src/arpifs/phys_dmn/suparar.F90:LICERAD=.TRUE.</li><li>LTOTPREC =&gt; &#39;.TRUE.&#39;, LMIXUV =&gt; &#39;.FALSE.&#39;</li></ul></li><li>Documentation</li></ul><h3 id="CY46"><a class="docs-heading-anchor" href="#CY46">CY46</a><a id="CY46-1"></a><a class="docs-heading-anchor-permalink" href="#CY46" title="Permalink"></a></h3><ul><li>Status<ul><li>Testbed is broken. Test on default setup is ongoing. <strong>Ulf</strong></li><li>Default setup works ( technically ). Tested 2021040100-2021040118.</li><li>Testbed outcome so far. Works:AROME,AROME<em>PYSURFEX</em>OI,AROME<em>3DVAR, Failing:AROME</em>3DVAR<em>SEKF,AROME</em>BD_ARO</li><li>Fix the message sending from testbed and a establish a contingency testbed with less computational demands to use in case of slow performance on CCA</li></ul></li><li>Tag beta version when the testbed give us the right signal that everything is ok - <strong>Daniel</strong></li><li>Canari: Upper air fields are corrupted. Work around with the MF implementation. Olda confirmed they use only surface fields - <strong>Trygve &amp; Patrick</strong></li><li>Accelerate CY46 transition:<ul><li>Reproducibility study with the same settings than 43h2.2 </li><li>4DVar latest merges should be fixed </li></ul></li><li>Fixing and closing Cycle 46 tickets open on hirlam.org- <strong>Toon</strong></li><li>Pysurfex status<ul><li>Invite Trygve to check the status <a href="https://docs.google.com/presentation/d/1s1niM291Je-pnsoFDB7SqGpyWyQxQA-G-krp0eRu-_0">Presentation</a><ul><li>Pysurfex lives in https://github.com/metno/pysurfex</li><li>Documentation in https://metno.github.io/pysurfex/</li></ul></li></ul></li><li>CMake (see <a href="https://hirlam.org/trac/ticket/188">ticket</a> ) and OOPS <ul><li>Adapt CMake to be able to build OOPS binaries - <a href="https://github.com/roelstappers/Harmonie/tree/feature/CY46_cmakeoops">Done</a> <strong>Yurii &amp; Roel</strong></li></ul></li><li>Sub-hourly cycling and scripting design<ul><li>Extend the current implemented solution waiting for a more common ACCORD plans</li><li>Possible naming convection problems for final users should be taken into account - <strong>Eoin</strong></li><li>Mandtg works with minutes - <strong>Ole</strong></li><li><a href="https://docs.google.com/presentation/d/1xi2Y7gkFSD9EgqquXDqDprwC4LGhZx9bEDuQXhhX2MM/edit#slide=id.gce02854fd2_0_20">Draft implementation plan</a></li><li>Backward compatibility ?? - <strong>Bert</strong></li></ul></li><li>Compilation in TEMS- <strong>Daniel &amp; Eoin</strong><ul><li>Create and submit.tems to avoid placement problems reutilizing the ecgb-cca one.</li><li>Issue<a href="https://github.com/Hirlam/SystemWW/issues/2">#2</a></li><li>Slack channel #ww2021-tems-installation</li></ul></li></ul><h3 id="CY48"><a class="docs-heading-anchor" href="#CY48">CY48</a><a id="CY48-1"></a><a class="docs-heading-anchor-permalink" href="#CY48" title="Permalink"></a></h3><ul><li>Status of Pending Branches:<ul><li>Bator: Minor fixes still needed - <strong>Eoin</strong></li><li>LOCND2: Test compilation of the branch, as it is,  inside MF and test with Davai. Plan for updating this branch for the new phisycs devs - <strong>Bert, Niko, Alexandre</strong></li><li>SPP: Should be introduced in CY48T2 in the &#39;old way&#39; to reduce the differences between codes. A further outdate will be needed in CY49 pre-phasing or CY49T1 continous integration. In CY49 the ECMWF SPP version will be available. <strong>Ulf</strong></li><li>Hybrid: Start again the branch compilation - <strong>Eoin, Daniel</strong> </li></ul></li><li>Compilation in CCA and TEMS - <strong>Daniel Toon</strong></li></ul><h3 id="CLIMATE:"><a class="docs-heading-anchor" href="#CLIMATE:">CLIMATE:</a><a id="CLIMATE:-1"></a><a class="docs-heading-anchor-permalink" href="#CLIMATE:" title="Permalink"></a></h3><ul><li>Pre generated climate fields for selected domains:<ul><li>Use testbed or %VAR% to pass ECFLOW variables to scripting  </li></ul></li><li>Out of bounds PGD <a href="https://github.com/Hirlam/Harmonie/issues/1">issue</a></li><li>Problems in domains with a lot of sea and few inland points - <strong>Colm Daniel Katya Patrick</strong><ul><li>Example from cyclones- <strong>Daniel</strong> </li></ul></li><li>ECMWF teleport connection and ecFlow_ui</li><li>Some instructions added to the wiki: <a href="https://hirlam.org/trac/wiki/HarmonieSystemDocumentation/ECMWF_teleport">https://hirlam.org/trac/wiki/HarmonieSystemDocumentation/ECMWF_teleport</a></li></ul><h3 id="DAVAï-**Alexadre**"><a class="docs-heading-anchor" href="#DAVAï-**Alexadre**">DAVAï <strong>Alexadre</strong></a><a id="DAVAï-**Alexadre**-1"></a><a class="docs-heading-anchor-permalink" href="#DAVAï-**Alexadre**" title="Permalink"></a></h3><ul><li>First setup of the portable version at ECMWF cca in summer 2021</li><li>VORTEX works in TEMS so Davai can be portable therer also.</li><li>Davai Tranning should be arranged</li><li>Implementation of Harmonie-CMC and maybe makeup/gmake as building tool could be the first tasks for us </li><li>Help on porting and testing offered to Alexandre <strong>Niko</strong></li></ul><h3 id="ACCORD-Convergence-actions:"><a class="docs-heading-anchor" href="#ACCORD-Convergence-actions:">ACCORD Convergence actions:</a><a id="ACCORD-Convergence-actions:-1"></a><a class="docs-heading-anchor-permalink" href="#ACCORD-Convergence-actions:" title="Permalink"></a></h3><ul><li>Questionaire</li><li>GIT solution</li><li>Bundle</li><li>Workflow, docs, training.  </li><li></li></ul><h3 id="Hirlam.org"><a class="docs-heading-anchor" href="#Hirlam.org">Hirlam.org</a><a id="Hirlam.org-1"></a><a class="docs-heading-anchor-permalink" href="#Hirlam.org" title="Permalink"></a></h3><ul><li>DMI movement planed mid 2022 but Storage change is planed end 2021</li><li>Ask about mailing list support at DMI mail services - <strong>Daniel</strong>  - <strong>Done</strong></li><li>Ask about OS update urgency - <strong>Daniel</strong>  - <strong>Done</strong></li></ul><h3 id="Document-dependencies-of-external-software"><a class="docs-heading-anchor" href="#Document-dependencies-of-external-software">Document dependencies of external software</a><a id="Document-dependencies-of-external-software-1"></a><a class="docs-heading-anchor-permalink" href="#Document-dependencies-of-external-software" title="Permalink"></a></h3><ul><li>https://hirlam.org/trac/wiki/HarmonieSystemDocumentation/Redhat7Install might be a useful starting point - definitely out of date</li><li>ECFBUNDL for that</li><li>Docker from Jacob could be usefull </li><li>Problems with Intel compiler in cy46 should be documented.</li></ul><h2 id="General-questions"><a class="docs-heading-anchor" href="#General-questions">General questions</a><a id="General-questions-1"></a><a class="docs-heading-anchor-permalink" href="#General-questions" title="Permalink"></a></h2><ul><li>How to control the namelist settings more effectively?</li><li>Where and how to document model changes and spread the info ?</li><li>Improve code modularity (for scripts) and use of package managers. Julia used as proof of concept- </li><li>Move to GitHub, gitlab the OpenSource software and how to treat the private areas for proprietary software</li><li>pull request, feature codes, documentation and port to different code versions</li><li>limits of free solutions (see <a href="https://github.com/organizations/Hirlam/settings/billing">current usage</a>)</li><li>Clean up of <a href="https://github.com/Hirlam/Harmonie/branches/stale">stale branches</a></li><li>Better to remove the gridpp and titanlib forks?  </li><li>Add more <a href="https://github.com/Hirlam/Harmonie/issues/labels">labels</a> (like <code>Data assimilation</code>, <code>IASI</code>) See <a href="https://github.com/Hirlam/Harmonie/pulls?q=is%3Apr+is%3Aclosed">pull request</a> so in the future we get overviews of  commits/pull request relevant for specific Harmonie components.  </li><li>Ideas for github actions <ul><li>Actions for testbed run (with options to only select subsets), davai, obsmon, harp, epygram </li><li>Actions to submit jobs to MF HPC </li><li>Actions that can run from the comment sections. See e.g. <a href="https://github.com/JuliaLang/julia/pull/40453#issuecomment-819200844">this</a> where on a pull request that is expected to impact the performance in Julia they simply write in the comment section   <code>@nanosoldier runbenchmarks(ALL, vs=&quot;:master&quot;)</code></li></ul></li></ul><pre><code class="nohighlight hljs">   Which runs the full benchmark (several hours) and get a link to report back as a reply</code></pre><h3 id="Monday"><a class="docs-heading-anchor" href="#Monday">Monday</a><a id="Monday-1"></a><a class="docs-heading-anchor-permalink" href="#Monday" title="Permalink"></a></h3><p>9:30 - 10:30  Videomeeting on: Introduction to the Virtual System WW</p><ul><li>Status of different cycles and outcomes for HMG meeting</li><li>SWW tasks organization</li></ul><p>10:30 - 11:00 Coffee Break</p><p>11:00 - 12:30  Work</p><p>12:30 - 13:30 Launch break</p><p>13:30 - 15:30  Work</p><p>15:30 - 16:30 Progress report </p><h3 id="Tuesday"><a class="docs-heading-anchor" href="#Tuesday">Tuesday</a><a id="Tuesday-1"></a><a class="docs-heading-anchor-permalink" href="#Tuesday" title="Permalink"></a></h3><p>9:30 - 10:30  HIRLAM GitHub workflow  10:30 - 11:30 Previous day wrap-up video-meeting</p><p>10:00 - 10:30 Coffee Break</p><p>10:30 - 12:00 Work</p><p>12:30 - 13:30 Launch break</p><p>13:30 - ... Work</p><h3 id="Wednesday"><a class="docs-heading-anchor" href="#Wednesday">Wednesday</a><a id="Wednesday-1"></a><a class="docs-heading-anchor-permalink" href="#Wednesday" title="Permalink"></a></h3><p>10:00 - 11:30 Previous day wrap-up video-meeting</p><p>10:00 - 10:30 Coffee Break</p><p>10:30 - 12:00 Work</p><p>12:30 - 13:30 Launch break</p><p>13:30 - ... Work</p><h3 id="Thursday-Friday"><a class="docs-heading-anchor" href="#Thursday-Friday">Thursday - Friday</a><a id="Thursday-Friday-1"></a><a class="docs-heading-anchor-permalink" href="#Thursday-Friday" title="Permalink"></a></h3><p>9:30 - 11:30 Previous day wrap-up video-meeting</p><p>10:00 - 10:30 Coffee Break</p><p>10:30 - 12:00 Work</p><p>12:30 - 13:30 Launch break</p><p>13:30 - ... Work</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../index.html">« Home</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 28 April 2023 13:16">Friday 28 April 2023</span>. Using Julia version 1.9.0-rc1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
