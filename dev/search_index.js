var documenterSearchIndex = {"docs":
[{"location":"Julia/spg/#Documenter-test","page":"Documenter test","title":"Documenter test","text":"","category":"section"},{"location":"Julia/spg/","page":"Documenter test","title":"Documenter test","text":"Interactive plot below is created in github actions.  ","category":"page"},{"location":"Julia/spg/","page":"Documenter test","title":"Documenter test","text":"# only need to serve figures with documenter #hide\nusing JSServe, WGLMakie #hide\npage = Page(offline=true, exportable=true) #hide","category":"page"},{"location":"Julia/spg/","page":"Documenter test","title":"Documenter test","text":"using FileIO  #hide\nlogo = load(\"../assets/logo.png\") #hide \n","category":"page"},{"location":"Julia/spg/","page":"Documenter test","title":"Documenter test","text":"using GaussianRandomFields, WGLMakie \nset_theme!(theme_black(), resolution=(800, 600)) #hide\n\n# Domain \nx = 1:188\ny = 1:268\n\n# 2D Gaussian covariance function length scale 20,\ncov = CovarianceFunction(2, Gaussian(20, σ= 10.0)) \n\ngrf = GaussianRandomField(cov, CirculantEmbedding(), x, y)\n\n# Create random sample \ndata = sample(grf)\n\ns = surface(data,color=logo)\nzoom!(s.axis.scene,0.5) #hide\ns #hide","category":"page"},{"location":"System/202305Dublin/#Dublin","page":"202305 Dublin","title":"202305 Dublin","text":"","category":"section"},{"location":"System/202305Dublin/#System-WW-2023/1","page":"202305 Dublin","title":"System WW - 2023/1","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"When: June 12 - 16, 2023\nLocation: Met Eireann, 65/67 Glasnevin Hill, Dublin 9 D09 Y921 Ireland https://goo.gl/maps/DZDtzcBEgz7g9Bj79\nMarkdown format Cheatsheet \nMeet link https://meet.google.com/xwx-hhrq-uuy ","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"(Image: WhatsApp Image 2023-06-14 at 15 45 54)","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Official picture","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"(Image: 944AA9CC-DC3A-42A5-A5FD-79966416A2CA)","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Un-official picture","category":"page"},{"location":"System/202305Dublin/#Participants","page":"202305 Dublin","title":"Participants","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"@dsantosm, @ToonMoene, @romick-knmi, @BertvanUlft, @ovignes, @roelstappers, @joewkr, @ConorDaly-met, @j-fannon Anyone else?","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Name Institute ARR - DEP Hotel Notes\nDaniel Santos DMI Sun - Fri Yugo Kavanagh \nEoin Whelan METIE Mon - Fri Casa Whelan \nRoel Stappers MET Norway Sun - Thu (18:30 DUB) Skylon Hotel \nConor Daly METIE Mon - Fri Casa Daly \nBert van Ulft KNMI Sun - Fri Skylon Hotel \nToon Moene KNMI Mon 12:00 - Fri 16:00 Egans House \nChristopher Romick KNMI Sun - Thur Skylon Hotel \nOle Vignes MET Norway Sun - Fri DCU Campus ","category":"page"},{"location":"System/202305Dublin/#Hotels","page":"202305 Dublin","title":"Hotels","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"A booking.com search for Glasnevin","category":"page"},{"location":"System/202305Dublin/#Refreshments","page":"202305 Dublin","title":"Refreshments","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":" \nCoffee 1045\nLunch 1300\nCoffee 1500","category":"page"},{"location":"System/202305Dublin/#On-site-meeting-info","page":"202305 Dublin","title":"On site meeting info","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"The WW will be held in the Conference Room\nReport to reception each day. Eoin or another Irish colleague will fetch you","category":"page"},{"location":"System/202305Dublin/#Tentative-agenda","page":"202305 Dublin","title":"Tentative agenda","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"CY49T1 contribution strategy and working practices\nCY49T1h and Tiger team concepts\nCY46h1 tagging \nhirlam.org movement to SKG\nSP for EPS status ","category":"page"},{"location":"System/202305Dublin/#Meeting-notes","page":"202305 Dublin","title":"Meeting notes","text":"","category":"section"},{"location":"System/202305Dublin/#CY49T1h-and-Tiger-team-concepts","page":"202305 Dublin","title":"CY49T1h and Tiger team concepts","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Slides \nDEODE scripting probably is not using the level of modularity that allows using some stand-alone components by Harmonie scripting such BC treatment. This lack of modularity was generated by the urgency of having deliverables by the project but also prevents an more efficient transfer and collaboration with the current scripting\nRoel showed the Julia stdlib modularity as an example where in every package there is a doc/src, src, test and Project.toml with Project.tom describing the dependencies on other packages \nCY49T1h offers more opportunities to promote a more continuous integration workflow\nWe need to be more strict on the norms and test to promote harmonie codes. \ncmake establish some control about some dependencies that can help\nCY49Th1 will be a branch or a fork in HIRLAM GitHub\nas a branch we will increase the contribution visibility and facilitate the code integration\nas a fork we have more freedom in HIRLAM GitHub\nscripts&utils repo will be created in HIRLAM GitHub","category":"page"},{"location":"System/202305Dublin/#CY49T1-integration-working-practices","page":"202305 Dublin","title":"CY49T1 integration working practices","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Use the list of possible contributions (wiki)\nHas been updated and crosschecked up to 20230614\nWe are going to group commits per area per topic per feature\nCreate a harmonie issue to monitor the progress.\nNew milestone is defined\nFollow the general process described in CONTRIBUTING.md\nUse this code as base at ECMWF: https://github.com/ACCORD-NWP/IAL/tree/accordCY49T0bf\nBranches nomenclature: although not anymore strictly mandatory with the use of Github, the legacy nomenclature","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"about IAL branches (<user>_<CYCLE>_<feature>, e.g. mary_CY48T1_mysuperdev)        - Add HIRLAM hash in the commit message to keep track of the contributions sent.","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Run Davaï at ECMWF/Belenos:\nDAVAI status at ECMWF:\nUPDATED How to:\nThe default billing account is spfracco, you can ask Daniel to grant you access or use your national account by commenting it out in the file : conf/davai_nrv.ini\nFor commenting the spfracco billing account \n```\nDavai options\nbilling_account     = spfracco\nbillingaccountft  = spfracco\n```\nTest case: DV49T0toT1 explained here\nWhen running DAVAI at ECMWF-Atos make sure to have the intel program environment loaded by setting module load prgenv/intel or module load pi in your .bash_profile\nDaniel modules  ```\nStart with a clean environment\nmodule purge\n# Load the needed modules for davai and Gmkpack       module load python3     module load pi     module load ecmwf-toolbox/2021.08.3.0     module use ~rm9/public/modulefiles     module load davai \n   module load intel/2021.4.0\n\n # Gmkpack is installed at Ryad El Khatib's\n   HOMEREK=~rme\n   export GMKROOT=$HOMEREK/public/bin/gmkpack\n # use efficiently filesystems\n   export ROOTPACK=$PERM/rootpack\n   export HOMEPACK=$PERM/pack\n   export GMKTMP=$TMPDIR/gmktmp\n # default compilation options\n   export GMKFILE=OMPIIFC2104.AA\n   export GMK_OPT=x\n # update paths\n   export PATH=$GMKROOT/util:$PATH\n   export MANPATH=$MANPATH:$GMKROOT/man\n```\nCreate a pull request in IAL repo:\nCoordination:\nEPS Ole\nSPG changes by Ole\nPhysics Bert\nDA and Obs Eoin and Roel\nTechnical changes Daniel and Chris","category":"page"},{"location":"System/202305Dublin/#Possible-option-to-use-git-for-forward-phasing-dev-CY46h1-to-accord*CY49T0*bf","page":"202305 Dublin","title":"Possible option to use git for forward phasing dev-CY46h1 to accordCY49T0bf","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Create a fork of ACCORD-NWP/IAL on github, if you haven't done so. Then follow steps below:","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"# Clone IAL user fork\n> git clone git@github.com:<git_user_name>/IAL.git\nCloning into 'IAL'...\nremote: Enumerating objects: 452182, done.\nremote: Counting objects: 100% (10857/10857), done.\nremote: Compressing objects: 100% (243/243), done.\nremote: Total 452182 (delta 10663), reused 10621 (delta 10608), pack-reused 441325\nReceiving objects: 100% (452182/452182), 541.26 MiB | 14.93 MiB/s, done.\nResolving deltas: 100% (366947/366947), done.\nUpdating files: 100% (18054/18054), done.\n\n# Go into the clone's directory\n> cd IAL\n\n# Add the Harmonie repo as remote and fetch it, without the tags\n> git remote add Harmonie git@github.com:Hirlam/Harmonie.git\n> git fetch Harmonie --no-tags\nremote: Enumerating objects: 80436, done.\nremote: Counting objects: 100% (9476/9476), done.\nremote: Compressing objects: 100% (509/509), done.\nremote: Total 80436 (delta 9015), reused 9286 (delta 8956), pack-reused 70960\nReceiving objects: 100% (80436/80436), 255.76 MiB | 15.27 MiB/s, done.\nResolving deltas: 100% (61284/61284), completed with 4448 local objects.\nFrom github.com:Hirlam/Harmonie\n * [new branch]            dev-CY46h1             -> Harmonie/dev-CY46h1\n * [new branch]            dev-CY46h1_eps         -> Harmonie/dev-CY46h1_eps\n * [new branch]            dev-CY46h1_spp_surface -> Harmonie/dev-CY46h1_spp_surface\n * [new branch]            harmonEPS-43h2.2       -> Harmonie/harmonEPS-43h2.2\n * [new branch]            harmonie-43h2.2_bf     -> Harmonie/harmonie-43h2.2_bf\n\n# Create a branch to implement your development in same directory ...\n> git checkout -b <user>_CY49T0_<description> origin/accord_CY49T0_bf\nbranch '<user>_CY49T0_<description>' set up to track 'origin/accord_CY49T0_bf'.\nSwitched to a new branch '<user>_CY49T0_<description>'\n# ... or via worktree, cd to it\ngit worktree add -b <user>_CY49T0_<description> ../<user>_CY49T0_<description> origin/accord_CY49T0_bf\nPreparing worktree (new branch '<user>_CY49T0_<description>')\nbranch '<user>_CY49T0_<description>' set up to track 'origin/accord_CY49T0_bf'.\nUpdating files: 100% (18054/18054), done.\nHEAD is now at 97d45f0a90 Workaround an Intel 2021.4.0 bug : Turn some FIRSTPRIVATE variables into PRIVATE (on behalf P.Marguinaud)\n> cd ../<user>_CY49T0_<description>\n\n# Remove upstream (optional)\n> git branch --unset-upstream\n\n# Create patch and merge in, using the commit hash, e.g.:\n> git format-patch -k --stdout aa99072424~1...aa99072424 -- src  | git am -3 -ks\nApplying: add switch for shallow convection in EDMFm (#581)\nUsing index info to reconstruct a base tree...\nA\tsrc/arpifs/module/yomparar.F90\nA\tsrc/arpifs/namelist/namparar.nam.h\nA\tsrc/arpifs/phys_dmn/suparar.F90\nA\tsrc/arpifs/phys_dmn/vdfhghtnhl.F90\n/home/ulft/temp/IAL_in_Harmonie/IAL/.git/worktrees/ulft_CY49T0_bla/rebase-apply/patch:65: trailing whitespace.\nLSHALLOWMF=.TRUE. \nwarning: 1 line adds whitespace errors.\nFalling back to patching base and 3-way merge...\nAuto-merging arpifs/phys_dmn/vdfhghtnhl.F90\nAuto-merging arpifs/phys_dmn/suparar.F90\nAuto-merging arpifs/namelist/namparar.nam.h\nAuto-merging arpifs/module/yomparar.F90\nCONFLICT (content): Merge conflict in arpifs/module/yomparar.F90\nerror: Failed to merge in the changes.\nPatch failed at 0001 add switch for shallow convection in EDMFm (#581)\n\n# If any conflicts, solve them (with e.g. meld), add the resolved files, and continue to finalize\n> meld arpifs/module/yomparar.F90\n> git add arpifs/module/yomparar.F90\n> git am --continue\nApplying: add switch for shallow convection in EDMFm (#581)\n\n# Modify commit message with --amend\n# Prepend references to PRs & issues with Hirlam/Harmonie\n# Add commit message as: Harmonie commmit: Hirlam/Harmonie@aa990724240a50faf6659777596cda60a9e93137\n> git commit --amend\n[<user>_CY49T0_<description> 86c5bf2224] add switch for shallow convection in EDMFm (Hirlam/Harmonie#581)\n Author: Natalie Theeuwes <19662980+natalieth@users.noreply.github.com>\n Date: Fri Jan 20 08:46:10 2023 +0100\n 4 files changed, 10 insertions(+), 3 deletions(-)\n\n# Push to user fork\ngit push -u origin <user>_CY49T0_<description>\n\n# Then run Davai & create PR","category":"page"},{"location":"System/202305Dublin/#Harmonie-46h1-tagging","page":"202305 Dublin","title":"Harmonie-46h1 tagging","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Validation strategy\nNew branch for release candidate management\nNew milestone to change the settings before tagging rc1 https://github.com/Hirlam/Harmonie/milestone/5\nPull requests checked before the branching:\nFIXES for SPG( i.e. running parts in DP ):\nThe changes are not clean enough and we can promote in a phasing exercise. Removed from https://github.com/Hirlam/Harmonie/pull/787\nAs we plan to create the CY49T1h in ACCORD forge could facilitate a cleaner implementation of SPG Ole\nFAKETREES\nSet to TRUE to maintain the consistency\nParallel MPI and PREP implementation based on the DEODE commits to speed up large domains like in CARRA2 Patrick & Ulf\nSee his merged PR here in the Deode branch.\nSome problems still in PREP reported by Ulf\nYurii is checking \nCan be introduce after the rc1 declaration as tech change\ngl for MUSC Conor\nExtend the testbed to gl ","category":"page"},{"location":"System/202305Dublin/#Testbed","page":"202305 Dublin","title":"Testbed","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"How to use as a proactive mode?\nIn hlam is run automatically after the commit is pushed.\nCreate a fix referene (REFEXP) for each cycle in hlam\nUpdate it ... how???","category":"page"},{"location":"System/202305Dublin/#Hirlam.org-movement-to-SKG","page":"202305 Dublin","title":"Hirlam.org movement to SKG","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"List of services:","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"root@hirlam:~# systemctl --type=service --state=running\nUNIT                     LOAD   ACTIVE SUB     DESCRIPTION\naccounts-daemon.service  loaded active running Accounts Service\napache2.service          loaded active running LSB: Apache2 web server\navahi-daemon.service     loaded active running Avahi mDNS/DNS-SD Stack\ncron.service             loaded active running Regular background program processing daemon\ncups-browsed.service     loaded active running Make remote CUPS printers available locally\ncups.service             loaded active running CUPS Scheduler\ndbus.service             loaded active running D-Bus System Message Bus\nexim4.service            loaded active running LSB: exim Mail Transport Agent\n[getty@tty1.service](mailto:getty@tty1.service)       loaded active running Getty on tty1\nibmspdzm.service         loaded active running IBM SP (TSM) service in DMZ mode\nirqbalance.service       loaded active running LSB: daemon to balance interrupts for SMP systems\nmunin-node.service       loaded active running Munin Node\nmysql.service            loaded active running MySQL Community Server\nnetworker.service        loaded active running LSB: EMC Networker. A backup and restoration software package.\nntp.service              loaded active running LSB: Start NTP daemon\npolkitd.service          loaded active running Authenticate and Authorize Users to Run Privileged Tasks\nrsyslog.service          loaded active running System Logging Service\nrunit.service            loaded active running Runit service supervision\nshiny-server.service     loaded active running ShinyServer\nssh.service              loaded active running OpenBSD Secure Shell server\nsystemd-journald.service loaded active running Journal Service\nsystemd-logind.service   loaded active running Login Service\nsystemd-udevd.service    loaded active running udev Kernel Device Manager\n[user@0.service](mailto:user@0.service)           loaded active running User Manager for UID 0\n[user@1009.service](mailto:user@1009.service)        loaded active running User Manager for UID 1009\n[user@1016.service](mailto:user@1016.service)        loaded active running User Manager for UID 1016\n[user@999.service](mailto:user@999.service)         loaded active running User Manager for UID 999\n\nNote that e.g. git and svn are not listed, as they are not \"services\" in the linux sense.\nBtw., I just stopped mailman, it would otherwise be in the list.","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Reduce the data stored on Data Portal:\nXiaohua Contacted as main responsible\nThe rest of the responsible names will be contacted also **Done*","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"/data/portal# ls -alt\ntotal 1124\ndrwxr-xr-x   4 cooper    www-data   4096 Jun 15 11:16 metcoop\ndrwxrwxr-x   2 faov      www-data   4096 Jun 15 11:07 phasing\ndrwxr-xr-x   2 faov      www-data   4096 Jun 15 11:06 osisaf\ndrwxrwsrwx  18 markku    www-data 987136 Jun 15 09:14 mastdata\ndrwxrwsrwx  33 xiaohua   www-data  12288 Jun  5 20:33 dmi\ndrwxrwxr-x  44 operaemet www-data   4096 May 31 12:55 aemet\ndrwxrwxr-x  22 xiaohua   www-data   4096 May 27 11:51 validation\ndrwxr-xr-x  90 xiaohua   www-data   4096 May  2 21:02 OprVer\ndrwxrwxrwx  14 ulf       admin      4096 Mar 17 10:25 harp\ndrwsrwsrwx  27 ulf       wwwsmhi    4096 Jan 25 07:40 smhi\n-rwxr-xr-x   1 cperalta  wwwdmi     3984 Sep 26  2022 dmi_local_verification\ndrwxrwxrwx  31 root      www-data   4096 Sep 26  2022 .\ndrwxrwsr-x   7 metno     www-data   4096 Sep 20  2022 metno\ndrwxrwxrwx   6 cperalta  wwwdmi     4096 Aug 19  2022 uwc_west\ndrwxrwx---   7 xiaohua   www-data   4096 Apr  7  2022 oprint\ndrwxrwxrwx   9 ahally    www-data   4096 Dec 14  2021 metie\ndrwxr-xr-x  30 egleeson  wwwmetie   4096 Dec 14  2021 egleeson\ndrwxrwxrwx  96 ulf       wwwsmhi    4096 Aug 24  2021 harmonEPS\ndrwxr-xr-x   3 wverkleij wwwknmi    4096 Jul 30  2021 knmi\ndrwxrwxr-x  21 kpn       www-data   4096 Dec 25  2020 kpn\n-rw-r--r--   1 root      root        316 Dec 14  2020 du-hcs_20201214.out\ndrwxrwxr-x  19 xiaohua   www-data   4096 Jul 31  2020 download\ndrwxr-xr-x   5 xiaohua   www-data   4096 May 27  2020 CARRA\ndrwxr-xr-x   7 root      root       4096 Aug  6  2019 ..\ndrwxr-xr-x  21 siggi     siggi      4096 Jul  2  2019 imo\ndrwxr-xr-x   3 aarne     www-data   4096 Aug 25  2018 emhi\ndrwxr-xr-x   2 martynas  www-data   4096 Aug 25  2018 lhms\ndrwxr-xr-x   6 xiaohua   www-data   4096 Mar  1  2018 glameps\ndrwxr-xr-x   6 ksa       www-data   4096 Nov 26  2017 GLAMEPS\ndrwxrwsr-x   5 www-data  www-data   4096 Dec 21  2015 fmi\ndrwxr--r-- 419 xiaohua   www-data  24576 Nov 17  2011 MGM\ndrwxr-xr-x   3 ulf       www-data   4096 Sep 26  2011 doxygen_browser\ndrwxr-xr-x   7 www-data  www-data   4096 Apr  4  2007 model-inter","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"After the movement to SKG:\nStop gitolite and svn:\nContact people that have forks to be sure that can be removed\nWiki only read access and make backup copy ","category":"page"},{"location":"System/202305Dublin/#Topics","page":"202305 Dublin","title":"Topics","text":"","category":"section"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Can we improve workflow practices on Github and use new features of Team plan \nCODEOWNERS, protect branches, draft PRS, .... \nDiscussion on configuration handling in Harmonie https://github.com/Hirlam/Harmonie/pull/837\nImprove source code organization (also for DEODE-prototype and AccordDATools)","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"<details> <summary>Testbed (First needs https://github.com/Hirlam/Harmonie/pull/837)</summary>","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Implemented github action to run testbed in the cloud and at ECMWF \nInstead of https://github.com/Hirlam/HarmonieTestbed-composite-action implement RunExperiment-composite-action taking ","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"  inputs:\n      config:            \n          description: configuration to run \n          default:  AROME_3DVAR\n          required: true \n      host: \n         default: config.github \n         required: true\n      dtg:\n         required: true \n      dtgend: \n         required: true  \n          ","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"Treat testbed config as normal harmonie_config. In the cloud start all testbed experiment in parallel with Harmonie setup -c inputs.config. I.e. don't uses the \"Master testbed exp\" that creates currently creates the childs in ecflow \nAdd config.github for SCRATCH etc  .  \nAdd Artifacts for climate files \nInstall ecflow in cloud \nSkip testbed runs for climate generation? \nTestbed_comp as separate github action. \nLog files will be available from the github action. Posting using github api to discusions no longer necessary. \nRun gitub action as a branch protection on dev-CY46h1. I.e. testbed only runs just before the merge of a PR. Disable any direct commits ","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"to dev-CY46h1","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"To discuss: Do we want to maintain a system like this? The alternative is to have a self host runner at ECMWF and would be a lot easier to maintain: just a github actions that does mkdir hm_home/exp, git clone Harmonie setup, Harmonie testbed","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"</details>","category":"page"},{"location":"System/202305Dublin/","page":"202305 Dublin","title":"202305 Dublin","text":"plans for CY48/CY49/CY50 Harmonie versions\nGPU refactoring requirements: Harmonie config in DAVAI, CY49 compilation, ecBundle\nLocation for non-system documentation (e.g. evaluation results with lots of images)","category":"page"},{"location":"Julia/spg2/#SPG-(time-correlations)","page":"SPG (time correlations)","title":"SPG (time correlations)","text":"","category":"section"},{"location":"Julia/spg2/","page":"SPG (time correlations)","title":"SPG (time correlations)","text":"using GaussianRandomFields, WGLMakie \n\n# Domain \nx = 1:188\ny = 1:268\nt = 1:100\n\n# 3D Gaussian covariance function length scale 20,\ncov = CovarianceFunction(3, Gaussian(20, σ= 10.0)) \n\ngrf = GaussianRandomField(cov, CirculantEmbedding(), x, y, t)\n\n# Create random sample \ndata = sample(grf)\n\n# Make figure\nfig = Figure();  ax = Axis3(fig[1,1])\n\nto = Observable(1);  pd = @lift(data[:,:,$to])\n\nsurface!(ax,pd)\n\n# Animation \nrecord(fig,\"$dir/spg.mp4\",t,framerate=10) do ti \n   to[] = ti \n   ax.azimuth[] = ax.azimuth[]+0.01\nend ","category":"page"},{"location":"Julia/spg2/","page":"SPG (time correlations)","title":"SPG (time correlations)","text":"(Image: )","category":"page"},{"location":"#Working-Week-notes","page":"Home","title":"Working Week notes","text":"","category":"section"},{"location":"","page":"Home","title":"Home","text":"Enjoy!","category":"page"},{"location":"System/202104Virtual/#Virtual","page":"202104 Virtual","title":"202104 Virtual","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"Date: 19 - 23 April  2021\nGoogle link\nNotes from previous meeting  \nMarkdown format Cheatsheet  ","category":"page"},{"location":"System/202104Virtual/#Participants","page":"202104 Virtual","title":"Participants","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"Name Institute ARR - DEP Home\nRoel Stappers MET Norway Monday - Friday Grubbenvorst\nDaniel Santos DMI Monday - Friday Becerril\nUlf Andrae SMHI Monday - Friday Norrköping\nToon Moene KNMI Monday - Friday Maartensdijk\nEoin Whelan METIE Monday - Friday Trim\nBert van Ulft KNMI Monday - Friday Utrecht\nOle Vignes MET Norway Monday - Friday Oslo","category":"page"},{"location":"System/202104Virtual/#Agenda,-Meeting-notes-and-tasks-progress","page":"202104 Virtual","title":"Agenda, Meeting notes and tasks progress","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"To discuss: An alternative to adding the progress below would be to create an issue for each task (in this SystemWW repo not the Harmonie repo) and keep track of the progress there in the comments (and close the issue when the task is finished)","category":"page"},{"location":"System/202104Virtual/#Priorities-2021","page":"202104 Virtual","title":"Priorities 2021","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"Davaii and mitrailllette for Harmonie if is possible outside MF PENDING\nBundling tool - PENDING\nCommon work space (gitlab, docs ...) ON GOING\nCross families working weeks- ON GOING ???\nSubhourly cycling based in perl or rewrite in python (resources ???)- '''Implementation in cy46''' ON GOING","category":"page"},{"location":"System/202104Virtual/#CY43","page":"202104 Virtual","title":"CY43","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"Testing for tagging 43h2.2\nNew simplified procedure these test [slide]- Jeanette, Bent, Daniel\nMetCoOp has some verification test ICERAD. Create a link in validation for tagging - Ole\nReview issues and Pending tasks\nRestrict ECCODES version to 2.18.0 to avoid some GRIB encoding problems although we can not encode spectral components. For this 2.21.0 is required. Ryad writes about GRIB output:\nIf you wish to produce GRIB2 files and not FA files directly out of Fullpos for backend post-processing, then you must be aware or the keys LEXTERN, CMODEL, NIDCEN and NFPGRIB, and then these mods and library are important. This is what we do in Meteo-France for operations since cycle 43t2.","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"For historical or coupling files it will become important for large resolutions or dimensions that GRIB1 can't support (but I don't know the limits). In Météo-France we shall use this GRIB2 encoding in LAM historical and coupling FA files in cycle 46t1 to be ready for the future, though it is not yet necessary for our operational resolutions. - Ulf      - ECMWF HPC and MARS retrievals are very slow      - Fix the issue 'harmonie AN runs that would use/dev/shm to create ODB related files and directories'issueClosed","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"Workflow in GitHub (pull requests, user forks, ...)  \nPrototype for github action to submit experiments from github - Roel\nDone. example. Works technically but needs discussion with ECMWF because of potential security issues. If we want to go for this workflow ask ECMWF to provide a github actions for access to TEMS with HID login? \nPrototype for github actions to extract information from log files - Roel \nDone. grepcost example. made by github action\nConsider splitting configuration (in YAML/TOML/JSON) setting in a seperate repo and use JSON schema for validation and get GUIs for free.\nharmonie43h2.2.target.1 branch created in dsantosm fork for new settings. Info about the settings [here](https://hirlam.org/trac/wiki/Harmonie43h2/Potentialupdatesfortagging43h2.2)     \nsurfexnamelists.pm: CSEAFLUX => '\"ECUME6\" \nNLWLIQOPT to 3: Nielsen (SW), Nielsen (LW) - Some fix is still needed Kristian will send a pullrequest\nsetting the CCN to 50 per cm3 src/arpifs/phys_dmn/suparar.F90:RFRMIN(26)=50E6\nLICERAD=TRUE src/arpifs/phys_dmn/suparar.F90:LICERAD=.TRUE.\nLTOTPREC => '.TRUE.', LMIXUV => '.FALSE.'\nDocumentation","category":"page"},{"location":"System/202104Virtual/#CY46","page":"202104 Virtual","title":"CY46","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"Status\nTestbed is broken. Test on default setup is ongoing. Ulf\nDefault setup works ( technically ). Tested 2021040100-2021040118.\nTestbed outcome so far. Works:AROME,AROMEPYSURFEXOI,AROME3DVAR, Failing:AROME3DVARSEKF,AROMEBD_ARO\nFix the message sending from testbed and a establish a contingency testbed with less computational demands to use in case of slow performance on CCA\nTag beta version when the testbed give us the right signal that everything is ok - Daniel\nCanari: Upper air fields are corrupted. Work around with the MF implementation. Olda confirmed they use only surface fields - Trygve & Patrick\nAccelerate CY46 transition:\nReproducibility study with the same settings than 43h2.2 \n4DVar latest merges should be fixed \nFixing and closing Cycle 46 tickets open on hirlam.org- Toon\nPysurfex status\nInvite Trygve to check the status Presentation\nPysurfex lives in https://github.com/metno/pysurfex\nDocumentation in https://metno.github.io/pysurfex/\nCMake (see ticket ) and OOPS \nAdapt CMake to be able to build OOPS binaries - Done Yurii & Roel\nSub-hourly cycling and scripting design\nExtend the current implemented solution waiting for a more common ACCORD plans\nPossible naming convection problems for final users should be taken into account - Eoin\nMandtg works with minutes - Ole\nDraft implementation plan\nBackward compatibility ?? - Bert\nCompilation in TEMS- Daniel & Eoin\nCreate and submit.tems to avoid placement problems reutilizing the ecgb-cca one.\nIssue#2\nSlack channel #ww2021-tems-installation","category":"page"},{"location":"System/202104Virtual/#CY48","page":"202104 Virtual","title":"CY48","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"Status of Pending Branches:\nBator: Minor fixes still needed - Eoin\nLOCND2: Test compilation of the branch, as it is,  inside MF and test with Davai. Plan for updating this branch for the new phisycs devs - Bert, Niko, Alexandre\nSPP: Should be introduced in CY48T2 in the 'old way' to reduce the differences between codes. A further outdate will be needed in CY49 pre-phasing or CY49T1 continous integration. In CY49 the ECMWF SPP version will be available. Ulf\nHybrid: Start again the branch compilation - Eoin, Daniel \nCompilation in CCA and TEMS - Daniel Toon","category":"page"},{"location":"System/202104Virtual/#CLIMATE:","page":"202104 Virtual","title":"CLIMATE:","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"Pre generated climate fields for selected domains:\nUse testbed or %VAR% to pass ECFLOW variables to scripting  \nOut of bounds PGD issue\nProblems in domains with a lot of sea and few inland points - Colm Daniel Katya Patrick\nExample from cyclones- Daniel \nECMWF teleport connection and ecFlow_ui\nSome instructions added to the wiki: https://hirlam.org/trac/wiki/HarmonieSystemDocumentation/ECMWF_teleport","category":"page"},{"location":"System/202104Virtual/#DAVAï-**Alexadre**","page":"202104 Virtual","title":"DAVAï Alexadre","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"First setup of the portable version at ECMWF cca in summer 2021\nVORTEX works in TEMS so Davai can be portable therer also.\nDavai Tranning should be arranged\nImplementation of Harmonie-CMC and maybe makeup/gmake as building tool could be the first tasks for us \nHelp on porting and testing offered to Alexandre Niko","category":"page"},{"location":"System/202104Virtual/#ACCORD-Convergence-actions:","page":"202104 Virtual","title":"ACCORD Convergence actions:","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"Questionaire\nGIT solution\nBundle\nWorkflow, docs, training.  \n","category":"page"},{"location":"System/202104Virtual/#Hirlam.org","page":"202104 Virtual","title":"Hirlam.org","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"DMI movement planed mid 2022 but Storage change is planed end 2021\nAsk about mailing list support at DMI mail services - Daniel  - Done\nAsk about OS update urgency - Daniel  - Done","category":"page"},{"location":"System/202104Virtual/#Document-dependencies-of-external-software","page":"202104 Virtual","title":"Document dependencies of external software","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"https://hirlam.org/trac/wiki/HarmonieSystemDocumentation/Redhat7Install might be a useful starting point - definitely out of date\nECFBUNDL for that\nDocker from Jacob could be usefull \nProblems with Intel compiler in cy46 should be documented.","category":"page"},{"location":"System/202104Virtual/#General-questions","page":"202104 Virtual","title":"General questions","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"How to control the namelist settings more effectively?\nWhere and how to document model changes and spread the info ?\nImprove code modularity (for scripts) and use of package managers. Julia used as proof of concept- \nMove to GitHub, gitlab the OpenSource software and how to treat the private areas for proprietary software\npull request, feature codes, documentation and port to different code versions\nlimits of free solutions (see current usage)\nClean up of stale branches\nBetter to remove the gridpp and titanlib forks?  \nAdd more labels (like Data assimilation, IASI) See pull request so in the future we get overviews of  commits/pull request relevant for specific Harmonie components.  \nIdeas for github actions \nActions for testbed run (with options to only select subsets), davai, obsmon, harp, epygram \nActions to submit jobs to MF HPC \nActions that can run from the comment sections. See e.g. this where on a pull request that is expected to impact the performance in Julia they simply write in the comment section   @nanosoldier runbenchmarks(ALL, vs=\":master\")","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"   Which runs the full benchmark (several hours) and get a link to report back as a reply","category":"page"},{"location":"System/202104Virtual/#Monday","page":"202104 Virtual","title":"Monday","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"9:30 - 10:30  Videomeeting on: Introduction to the Virtual System WW","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"Status of different cycles and outcomes for HMG meeting\nSWW tasks organization","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"10:30 - 11:00 Coffee Break","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"11:00 - 12:30  Work","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"12:30 - 13:30 Launch break","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"13:30 - 15:30  Work","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"15:30 - 16:30 Progress report ","category":"page"},{"location":"System/202104Virtual/#Tuesday","page":"202104 Virtual","title":"Tuesday","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"9:30 - 10:30  HIRLAM GitHub workflow  10:30 - 11:30 Previous day wrap-up video-meeting","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"10:00 - 10:30 Coffee Break","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"10:30 - 12:00 Work","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"12:30 - 13:30 Launch break","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"13:30 - ... Work","category":"page"},{"location":"System/202104Virtual/#Wednesday","page":"202104 Virtual","title":"Wednesday","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"10:00 - 11:30 Previous day wrap-up video-meeting","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"10:00 - 10:30 Coffee Break","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"10:30 - 12:00 Work","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"12:30 - 13:30 Launch break","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"13:30 - ... Work","category":"page"},{"location":"System/202104Virtual/#Thursday-Friday","page":"202104 Virtual","title":"Thursday - Friday","text":"","category":"section"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"9:30 - 11:30 Previous day wrap-up video-meeting","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"10:00 - 10:30 Coffee Break","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"10:30 - 12:00 Work","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"12:30 - 13:30 Launch break","category":"page"},{"location":"System/202104Virtual/","page":"202104 Virtual","title":"202104 Virtual","text":"13:30 - ... Work","category":"page"}]
}
